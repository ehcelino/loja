<div class="container">
  <div class ="container border rounded shadow" style="margin-top: 20px;">
    <div class="row" style=" padding-top: 10px;">
      <div class="col">
        <h2>Cadastro de produtos</h2>
      </div>
      <%= form_with model: @product do |f| %>
        <div class="mb-3">
          <%= f.label 'Produto', class: "form-label" %>
          <%= f.text_field :name, placeholder: 'Nome do produto', class: "form-control" %>
        </div>
        <div class="mb-3">
          <%= f.label 'Descrição', class: "form-label" %>
          <%= f.text_area :description, placeholder: 'Descrição', class: "form-control" %>
        </div>
        <div class="mb-3">
          <%= f.label 'Conteúdo', class: "form-label" %>
          <%= f.rich_text_area :content %>
        </div>
        <div class="mb-3">
          <%= f.label 'Categoria', class: "form-label" %>
          <div style="margin-bottom:10px;">
            <%= f.collection_select :category_id, Category.all, :id, :category, html_options = {class: "form-select"} %>
          </div>
        </div>
        <div class="mb-3">
          <%= f.label 'Código', class: "form-label" %>
          <%= f.text_field :code, placeholder: 'Código', class: "form-control" %>
        </div>
        <div class="mb-3">
          <%= f.label 'Valor', class: "form-label" %>
          <%= f.number_field :price, min: 0, step: 0.01, class: "form-control" %>
        </div>
        <div class="mb-3">
          <%= f.label 'Imagens', class: "form-label" %>
          <%= f.file_field :images, multiple: true, class: "form-control" %>
        </div>

        <div class="mb-3">
          <%= f.label 'Ativo', class: "form-label" %>
          <%= f.check_box :active %>
        </div>
        <div class="mb-3">
          <%= f.label 'Quantidade em estoque', class: "form-label" %>
          <%= f.number_field :stock, class: "form-control" %>
        </div>
        <div class="mb-3">
          <%= f.label 'Em promoção', class: "form-label" %>
          <%= f.check_box :promo %>
        </div>
        <div class="mb-3">
          <%= f.submit "Enviar", class: "btn btn-primary mb-3" %>
        </div>
      <% end %>
      <div class="mb-3">
        Imagens anexadas
      </div>
      <div class="container text-center">
        <% @product.images.each_with_index do |img, idx| %>
          <div class="row align-items-center border round">
            <div class="col-sm-4">
              <img src="<%= (url_for(img)) %>" class="resize-product"> 
            </div>
            <div class="col-sm-2">
              Índice: <%= idx %>
            </div>
            <div class="col-sm-3">
              <%= button_to "Apagar", delete_image_product_path(@product, image_index: idx), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-primary mb-3" %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
    <%= link_to "Voltar", :back, class: "btn btn-primary mb-3", style: "margin-top:20px;" %>
  </div>
</div>